package net.skhu.mapper;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Options;
import org.apache.ibatis.annotations.Select;

import net.skhu.dto.Address;

@Mapper
public class AddressMapper {

	@Select("SELECT * FROM address WHERE id = #{id}")
	Address findOne(int id);

	@Select("SELECT * FROM address WHERE employeeId = #{employeeId}")
	Address findByEmployeeId(int employeeId);

	@Select("SELECT a.*, e.name					 " +
			"FROM address a LEFT JOIN employee e " +
			" ON a.employeeId = e.id			 ")
	List<Address> findAll();

	@Insert("INSERT address (employeeId, phone, address)" +
			"VALUES (#{employeeId}, #{phone}, #{address}) ")
	@Options(useGeneratedKeys=true, keyProperty="id")
	void insert(Address address);
}
